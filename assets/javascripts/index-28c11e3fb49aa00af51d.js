!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="assets/javascripts/",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function r(e){return e.slice().map(function(e){return e.slice()})}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){n(this,e),this.height=t.length,this.width=t[0].length,this.prevBoard=[],this.board=r(t)}return s(e,[{key:"next",value:function(){this.prevBoard=r(this.board);for(var t=0;t<this.height;t++)for(var n=0;n<this.width;n++){var i=e.aliveNeighbours(this.prevBoard,n,t),s=!!this.board[t][n];s?(2>i||i>3)&&(this.board[t][n]=0):3==i&&(this.board[t][n]=1)}}},{key:"toString",value:function(){return this.board.map(function(e){return e.join(" ")}).join("\n")}}],[{key:"aliveNeighbours",value:function(e,t,n){var i=e[n-1]||[],r=e[n+1]||[];return[i[t-1],i[t],i[t+1],e[n][t-1],e[n][t+1],r[t-1],r[t],r[t+1]].reduce(function(e,t){return e+ +!!t},0)}}]),e}(),o=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0],r=arguments.length<=1||void 0===arguments[1]?750:arguments[1],s=arguments.length<=2||void 0===arguments[2]?i("#js-grid"):arguments[2];n(this,e),this.size=t,this.speed=r,this.grid=s}return s(e,[{key:"init",value:function(){this.timer=null,this.started=!1,this.autoplay=!1,this.checkboxes=[],this.createGrid(),this.listen()}},{key:"reset",value:function(e){this.size=e,this.started&&this.stop(),this.init()}},{key:"play",value:function(){this.game=new a(this.boardArray),this.started=!0}},{key:"stop",value:function(){clearTimeout(this.timer),this.started=!1}},{key:"createGrid",value:function(){var e=document.createDocumentFragment();this.grid.innerHTML="";for(var t=0,n=this.size;n>t;t++){var i=document.createElement("tr");this.checkboxes[t]=[];for(var r=0,s=this.size;s>r;r++){var a=document.createElement("td"),o=document.createElement("input");o.type="checkbox",this.checkboxes[t][r]=o,o.coords=[t,r],a.appendChild(o),i.appendChild(a)}e.appendChild(i)}this.grid.appendChild(e)}},{key:"next",value:function(){var e=this;(!this.started||this.game)&&this.play(),this.game.next();for(var t=this.game.board,n=0;n<this.size;n++)for(var i=0;i<this.size;i++)this.checkboxes[n][i].checked=!!t[n][i];this.autoplay&&(this.timer=setTimeout(function(){return e.next()},this.speed))}},{key:"listen",value:function(){function e(){n.autoPlay.checked=!1,n.next.disabled=!1}var t=this,n={next:i("#js-next"),newGame:i("#js-newGame"),newSize:i("#js-newSize"),autoPlay:i("#js-autoPlay"),speedControl:i("#js-speedControl")};n.next.addEventListener("click",function(){t.next()}),n.autoPlay.addEventListener("change",function(){var e=n.autoPlay;n.next.disabled=e.checked,t.autoplay=e.checked,e.checked?t.next():t.stop()}),n.newGame.addEventListener("click",function(i){t.reset(n.newSize.value),e()}),n.speedControl.addEventListener("change",function(){t.speed=n.speedControl.max-n.speedControl.value}),this.grid.addEventListener("change",function(n){"INPUT"==n.target.nodeName&&(t.stop(),e())}),this.grid.addEventListener("keyup",function(e){var n=e.target;if("INPUT"==n.nodeName){var i=t.checkboxes,r=n.coords[0],s=n.coords[1];switch(e.keyCode){case 37:s>0&&i[r][s-1].focus();break;case 38:r>0&&i[r-1][s].focus();break;case 39:s<t.size-1&&i[r][s+1].focus();break;case 40:r<t.size-1&&i[r+1][s].focus()}}})}},{key:"boardArray",get:function(){return this.checkboxes.map(function(e){return e.map(function(e){return+e.checked})})}}]),e}(),u=new o;u.init()}]);
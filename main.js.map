{"version":3,"sources":["main.es6"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function $(selector, container) {\n    return (container || document).querySelector(selector);\n}\nfunction shallowClone(arr) {\n    return arr.slice().map((row) => row.slice());\n}\n\n(function() {\n    let _ = self.Life = function(seed) {\n        this.seed = seed;\n        this.height = seed.length;\n        this.width = seed[0].length;\n\n        this.prevBoard = [];\n        this.board = shallowClone(seed);\n    };\n\n    _.prototype = {\n        next() {\n            this.prevBoard = shallowClone(this.board);\n            for (let y = 0; y < this.height; y++) {\n                for (let x = 0; x < this.width; x++) {\n                    let neighbours = this.aliveNeighbours(this.prevBoard, x, y);\n                    let alive = !!this.board[y][x];\n\n                    if (alive) {\n                        if (neighbours < 2 || neighbours > 3) this.board[y][x] = 0;\n                    } else {\n                        if (neighbours == 3) this.board[y][x] = 1;\n                    }\n                }\n            }\n        },\n\n        aliveNeighbours(arr, x, y) {\n            let prevRow = arr[y - 1] || [];\n            let nextRow = arr[y + 1] || [];\n\n            return [\n                prevRow[x - 1], prevRow[x], prevRow[x + 1],\n                arr[y][x - 1], arr[y][x + 1],\n                nextRow[x - 1], nextRow[x], nextRow[x + 1]\n                // +!! will convert undefined to 0\n            ].reduce((s, v) => {return s + +!!v}, 0);\n        },\n\n        toString() {\n            return this.board.map((row) => row.join(' ')).join('\\n')\n        }\n    };\n\n})();\n\n(function() {\n    let _ = self.lifeView = function(table, size) {\n        this.grid = table;\n        this.size = size;\n        this.started = false;\n        this.autoplay = false;\n\n        this.createGrid();\n    };\n\n    _.prototype = {\n        createGrid() {\n            let fragment = document.createDocumentFragment();\n            this.grid.innerHTML = '';\n            this.checkboxes = [];\n\n            for (let y = 0; y < this.size; y++) {\n                let row = document.createElement('tr');\n                this.checkboxes[y] = [];\n\n                for (let x = 0; x < this.size; x++) {\n                    let cell = document.createElement('td');\n                    let checkbox = document.createElement('input');\n                    checkbox.type = 'checkbox';\n                    this.checkboxes[y][x] = checkbox;\n                    checkbox.coords = [y, x];\n\n                    cell.appendChild(checkbox);\n                    row.appendChild(cell);\n                }\n                fragment.appendChild(row);\n            }\n\n            this.grid.addEventListener('change', (e) => {\n                if (e.target.nodeName == 'INPUT') this.started = false;\n            });\n\n            this.grid.addEventListener('keyup', (e) => {\n                let checkbox = e.target;\n                if (checkbox.nodeName == 'INPUT') {\n                    let [boxes, y, x] = [this.checkboxes, checkbox.coords[0], checkbox.coords[1]];\n                    switch (e.keyCode) {\n                        case 37:\n                            if (x>0) boxes[y][x-1].focus();\n                            break;\n                        case 38:\n                            if (y>0) boxes[y-1][x].focus();\n                            break;\n                        case 39:\n                            if (x<this.size-1) boxes[y][x+1].focus();\n                            break;\n                        case 40:\n                            if (y<this.size-1) boxes[y+1][x].focus();\n                            break;\n                    }\n                }\n            });\n\n\n            this.grid.appendChild(fragment);\n        },\n\n        get boardArray() {\n            return this.checkboxes.map(row => row.map(checkbox => +checkbox.checked));\n        },\n\n        play() {\n            this.game = new Life(this.boardArray);\n            this.started = true;\n        },\n\n        next() {\n            if (!this.started || this.game) this.play();\n\n            this.game.next();\n\n            let board = this.game.board;\n\n            for (let y = 0; y < this.size; y++) {\n                for (let x = 0; x < this.size; x++) {\n                    this.checkboxes[y][x].checked = !!board[y][x];\n                }\n            }\n\n            if (this.autoplay) {\n                this.timer = setTimeout(() => this.next(), 700)\n            }\n        }\n\n    }\n\n})();\n\nlet lifeView = new lifeView($('.grid'), 12);\n\n(function() {\n\n    let buttons = {\n        next: $('button.next'),\n        autoplay: $('#autoplay')\n    };\n\n    buttons.next.addEventListener('click', function() {\n        lifeView.next();\n    });\n\n    buttons.autoplay.addEventListener('change', function() {\n        buttons.next.textContent = this.checked ? 'Start' : 'Next';\n        lifeView.autoplay = this.checked;\n\n        if (!this.checked) clearTimeout(lifeView.timer);\n    });\n\n})();\n"]}